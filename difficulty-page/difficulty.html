<!DOCTYPE html>
<html lang="en">
<head>
<base href="/Math-Monkeys/">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Select Difficulty</title>
<!-- Standard favicon -->
<link rel="icon" href="/assets/Favicon_32x32.ico" type="image/x-icon">

<!-- PNG favicon for modern browsers -->
<link rel="icon" href="/assets/Favicon_64x64.png" sizes="32x32" type="image/png">
<link rel="icon" href="/assets/Favicon_16x16.png" sizes="16x16" type="image/png">

<!-- Android Chrome icon -->
<link rel="icon" href="/assets/Favicon_192x192.png" sizes="192x192" type="image/png">
<link rel="icon" href="/assets/Favicon_512x512.png" sizes="512x512" type="image/png">

<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(to right, #6a11cb, #2575fc);
    color: #fff;
    min-height: 100vh;
    padding: 20px 0;
  }

  h1 {
    margin: 20px 0 30px 0;
    text-align: center;
    font-size: 2rem;
    text-shadow: 0 0 10px rgba(0,0,0,0.5);
  }

  .slider-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 90%;
    max-width: 400px;
    user-select: none;
    margin-bottom: 50px;
  }

  .slider-track {
    position: relative;
    width: 100%;
    height: 12px;
    background: #ccc;
    border-radius: 6px;
  }

  .slider-button {
    position: absolute;
    top: -10px;
    left: 0;
    width: 32px;
    height: 32px;
    background: #ffeb3b;
    border-radius: 50%;
    cursor: grab;
    transition: left 0.2s;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
  }

  .slider-button:active {
    cursor: grabbing;
    transform: scale(1.1);
  }

  .emoji-container {
    display: flex;
    justify-content: space-between;
    width: 100%;
    margin-top: 20px;
    font-size: 2rem;
    user-select: none;
  }

  .emoji.selected {
    transform: scale(1.3);
    transition: transform 0.2s;
  }

.card-container {
  width: 90%;
  max-width: 500px;
  position: relative;
  min-height: 250px; /* taller on desktop */
  margin-bottom: 30px;
}

.difficulty-card {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%; /* card fills container */
  background: rgba(0,0,0,0.6);
  border-left: 6px solid #ffeb3b;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(0,0,0,0.3);
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.4s, transform 0.4s;
  display: flex;
  flex-direction: column;
  justify-content: center; /* center content vertically */
}

.difficulty-card.show {
  opacity: 1;
  transform: translateY(0);
  z-index: 10;
}

.difficulty-card h2 {
  margin: 0 0 10px 0;
  font-size: 1.5rem;
}

.difficulty-card p {
  margin: 0;
  font-size: 1.1rem;
  line-height: 1.4;
}

/* Mobile responsiveness */
@media (max-width: 500px) {
  .card-container {
    min-height: 220px; /* taller on mobile */
  }
  .difficulty-card {
    padding: 15px;
  }
  .difficulty-card h2 {
    font-size: 1.3rem;
  }
  .difficulty-card p {
    font-size: 1rem;
  }
}

#confirmDifficulty {
  margin-top: 20px;
  padding: 12px 25px;
  font-size: 1.1rem;
  border: none;
  border-radius: 10px;
  background: #ffeb3b;
  color: #000;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  transition: transform 0.2s, box-shadow 0.2s;
}

/* Slight pop effect on hover */
#confirmDifficulty:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.35);
}

/* Mobile sticky button */
@media (max-width: 500px) {
  #confirmDifficulty {
    position: fixed;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 400px;
    z-index: 20;
  }
}

</style>
</head>
<body>

<h1>Select Difficulty</h1>

<div class="slider-container">
  <div class="slider-track">
    <div class="slider-button" id="sliderButton"></div>
  </div>
  <div class="emoji-container">
    <span class="emoji" data-difficulty="easy">‚ò∫Ô∏è</span>
    <span class="emoji" data-difficulty="medium">üòê</span>
    <span class="emoji" data-difficulty="hard">üòà</span>
  </div>
</div>

<div class="card-container">
  <div class="difficulty-card" id="easyCard">
    <h2>üòåEasy ‚Äì Toddler Level Maths</h2>
    <p>Simple sums, only integers. Every Division question is to be solved without decimal. Perfect for Mental Math practice and children.</p>
  </div>
  <div class="difficulty-card" id="mediumCard">
    <h2>üòêMedium ‚Äì Challengingüî•</h2>
    <p>Decimals, BODMAS, and multi-step calculations. Subtractions may result in negative and it's Hard. Time to put your skills to test!</p>
  </div>
  <div class="difficulty-card" id="hardCard">
    <h2>üòàHard ‚Äì Math Specialist Mode</h2>
    <p>This is specially designed for math lovers and experts. <strong>Choose this difficulty wisely</strong> as it is gonna contain a lot of Math nightmares. Sit with your <strong>Math Teacher</strong> while playing with this difficulty. Even with the calculator I added, won't be enough.üòà</p>
  </div>
</div>

<!-- Confirm Button -->
<!-- Confirm Button -->
<button id="confirmDifficulty">
  Confirm Difficulty
</button>


<script>
  const sliderButton = document.getElementById('sliderButton');
  const sliderTrack = document.querySelector('.slider-track');
  const emojis = document.querySelectorAll('.emoji');
  const cards = {
    easy: document.getElementById('easyCard'),
    medium: document.getElementById('mediumCard'),
    hard: document.getElementById('hardCard')
  };

  let trackWidth = sliderTrack.offsetWidth;
  const snapPositions = [0, trackWidth / 2, trackWidth]; 
  const difficulties = ["easy", "medium", "hard"];
  let selectedDifficulty = "easy";
  let dragging = false;

  function hideAllCards() {
    Object.values(cards).forEach(card => card.classList.remove('show'));
  }

  function showCard(difficulty) {
    hideAllCards();
    cards[difficulty].classList.add('show');
  }

  function snapButton() {
    const left = parseInt(sliderButton.style.left || 0);
    let nearest = snapPositions.reduce((prev, curr) =>
      Math.abs(curr - left) < Math.abs(prev - left) ? curr : prev
    );
    sliderButton.style.left = nearest + "px";

    selectedDifficulty = difficulties[snapPositions.indexOf(nearest)];

    emojis.forEach(e => e.classList.remove('selected'));
    emojis[snapPositions.indexOf(nearest)].classList.add('selected');

    showCard(selectedDifficulty);
    localStorage.setItem('difficulty', selectedDifficulty);
  }

  // Mouse events
  sliderButton.addEventListener('mousedown', e => dragging = true);
  document.addEventListener('mouseup', e => {
    if(dragging) {
      dragging = false;
      snapButton();
    }
  });
  document.addEventListener('mousemove', e => {
    if(dragging){
      const rect = sliderTrack.getBoundingClientRect();
      let x = e.clientX - rect.left - sliderButton.offsetWidth/2;
      x = Math.max(0, Math.min(x, trackWidth));
      sliderButton.style.left = x + "px";
    }
  });

  // Touch events
  sliderButton.addEventListener('touchstart', e => {
    dragging = true;
    e.preventDefault(); // prevent scrolling while dragging
  });
  document.addEventListener('touchend', e => {
    if(dragging){
      dragging = false;
      snapButton();
    }
  });
  document.addEventListener('touchmove', e => {
    if(dragging){
      const touch = e.touches[0];
      const rect = sliderTrack.getBoundingClientRect();
      let x = touch.clientX - rect.left - sliderButton.offsetWidth/2;
      x = Math.max(0, Math.min(x, trackWidth));
      sliderButton.style.left = x + "px";
    }
  }, {passive:false});

  // Click on emojis
  emojis.forEach((emoji, idx) => {
    emoji.addEventListener('click', () => {
      sliderButton.style.left = snapPositions[idx] + "px";
      snapButton();
    });
  });

// Initialize based on saved difficulty
let savedDifficulty = localStorage.getItem("difficulty") || "easy";
let index = difficulties.indexOf(savedDifficulty);

// Set slider position
sliderButton.style.left = snapPositions[index] + "px";

// Highlight correct emoji
emojis.forEach(e => e.classList.remove('selected'));
emojis[index].classList.add('selected');

// Show correct card
showCard(savedDifficulty);

// Set selectedDifficulty variable
selectedDifficulty = savedDifficulty;


  // Update snapPositions on resize
  window.addEventListener('resize', () => {
    trackWidth = sliderTrack.offsetWidth;
    snapPositions[0] = 0;
    snapPositions[1] = trackWidth / 2;
    snapPositions[2] = trackWidth;
    snapButton(); // ensure button stays snapped correctly
  });

const confirmBtn = document.getElementById('confirmDifficulty');

confirmBtn.addEventListener('click', () => {
  // Save the selected difficulty
  localStorage.setItem('difficulty', selectedDifficulty);

  // Feedback
  confirmBtn.textContent = `Difficulty "${selectedDifficulty}" saved ‚úÖ`;
  confirmBtn.disabled = true;
  confirmBtn.style.background = "#00ff88";

  // Redirect to main page
  // Change the path below according to your project structure
  setTimeout(() => {
    window.location.href = '/Math-Monkeys/index.html'; 
  }, 700); // small delay to show feedback
});

</script>

</body>
</html>
